<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ü—Ä–æ—Ç–æ–∫–æ–ª –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏</title>
  <link rel="stylesheet" href="/static/style.css" />
  
</head>
<body>
<script>
  // –û—Ç–º–µ—á–∞–µ–º –ø–æ–ª—è –∫–∞–∫ "–≥—Ä—è–∑–Ω—ã–µ", –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Ö —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª
  let previousFields = {};
  function markDirty(event) {
    event.target.dataset.dirty = "true";
  }

  // –ù–∞–≤–µ—à–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞ –≤—Å–µ –ø–æ–ª—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  window.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll("input, textarea, select").forEach(el => {
      el.addEventListener("input", markDirty);
    });
    
    fetchUpdatedFields(); // –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
  });

  async function fetchUpdatedFields() {
  try {
    const response = await fetch("/get_fields/");
    if (!response.ok) throw new Error("–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞");

    const data = await response.json();
    const fields = data.fields;

    for (const [key, value] of Object.entries(fields)) {
      const el = document.getElementById(key);
      if (!el) continue;

      const previousValue = previousFields[key];

      // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª –ø–æ–ª–µ, –Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ–º–µ–Ω—è–ª–æ—Å—å ‚Äî –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º
      const isDirty = el.dataset.dirty === "true";
      const hasChangedOnServer = previousValue !== value;

      if (!isDirty || hasChangedOnServer) {
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
          el.value = value;
        } else if (el.tagName === 'SELECT') {
          Array.from(el.options).forEach(opt => {
            opt.selected = opt.value === value;
          });
        }

        // –û–±–Ω–æ–≤–∏–º –ª–æ–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
        el.dataset.dirty = "false";
      }
    }

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ
    previousFields = { ...fields };
  } catch (err) {
    console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:", err);
  }
  }

  // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 0,5 —Å–µ–∫—É–Ω–¥
  setInterval(fetchUpdatedFields, 500);
</script>


  <img src="/static/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo" />
  <div class="container">
    <h1>–ü—Ä–æ—Ç–æ–∫–æ–ª –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏
        <!-- <input type="date" id="date" /> -->
      </h1>

    <div class="patient-info">
      <label>–§–ò–û –ø–∞—Ü–∏–µ–Ω—Ç–∞ <input id="—Ñ–∏–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞" type="text"/></label>
      <label>–ü–æ–ª
        <select id="–ø–æ–ª" name="gender">
    <option value="–ú—É–∂—Å–∫–æ–π.">–ú—É–∂—Å–∫–æ–π</option>
    <option value="–ñ–µ–Ω—Å–∫–∏–π.">–ñ–µ–Ω—Å–∫–∏–π</option>
        </select>
      </label>
      
      <label>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è <input id="–¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è" type="text" /></label>
      <label>–ù–æ–º–µ—Ä –º–µ–¥–∫–∞—Ä—Ç—ã
        <input id="–Ω–æ–º–µ—Ä –º–µ–¥–∫–∞—Ä—Ç—ã" type="text" name="medCard" />
      </label>
      
    </div>

    <div class="columns">
      <div class="column">
        <div class="field">
          <label>–ñ–∞–ª–æ–±—ã</label>
          <textarea id="–∂–∞–ª–æ–±—ã"></textarea>
        </div>
        <div class="field">
          <label>–ê–Ω–∞–º–Ω–µ–∑ –∂–∏–∑–Ω–∏</label>
          <textarea id="–∞–Ω–∞–º–Ω–µ–∑ –∂–∏–∑–Ω–∏"></textarea>
        </div>
        <div class="field">
          <label>–ù–µ–≤—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å</label>
          <textarea id="–Ω–µ–≤—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å"></textarea>
        </div>
        <div class="field">
          <label>–†–µ—á—å</label>
          <textarea id="—Ä–µ—á—å"></textarea>
        </div>
        <div class="field">
          <label>–ì–Ω–æ–∑–∏—Å</label>
          <textarea id="–≥–Ω–æ–∑–∏—Å"></textarea>
        </div>
        <div class="field">
          <label>–ì–ª–∞–∑–Ω—ã–µ —â–µ–ª–∏</label>
          <textarea id="–≥–ª–∞–∑–Ω—ã–µ —â–µ–ª–∏"></textarea>
        </div>
        <div class="field">
          <label>–ó—Ä–∞—á–∫–∏</label>
          <textarea id="–∑—Ä–∞—á–∫–∏"></textarea>
        </div>
        <div class="field">
          <label>–ö–æ—Å–æ–≥–ª–∞–∑–∏–µ</label>
          <textarea id="–∫–æ—Å–æ–≥–ª–∞–∑–∏–µ"></textarea>
        </div>
        <div class="field">
          <label>–î–≤–∏–∂–µ–Ω–∏–µ –≥–ª–∞–∑–Ω—ã—Ö —è–±–ª–æ–∫</label>
          <textarea id="–¥–≤–∏–∂–µ–Ω–∏–µ –≥–ª–∞–∑–Ω—ã—Ö —è–±–ª–æ–∫"></textarea>
        </div>
        <div class="field">
          <label>–î–≤–∏–≥–∞—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</label>
          <textarea id="–¥–≤–∏–≥–∞—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞"></textarea>
        </div>
        <div class="field">
          <label>–ú—ã—à–µ—á–Ω–∞—è —Å–∏–ª–∞ –≤ –Ω–∏–∂–Ω–∏—Ö –∫–æ–Ω–µ—á–Ω–æ—Å—Ç—è—Ö</label>
          <textarea id="–º—ã—à–µ—á–Ω–∞—è —Å–∏–ª–∞ –≤ –Ω–∏–∂–Ω–∏—Ö –∫–æ–Ω–µ—á–Ω–æ—Å—Ç—è—Ö"></textarea>
        </div>
        <div class="field">
          <label>–ú—ã—à–µ—á–Ω—ã–π —Ç–æ–Ω—É—Å</label>
          <textarea id="–º—ã—à–µ—á–Ω—ã–π —Ç–æ–Ω—É—Å"></textarea>
        </div>
        <div class="field">
          <label>–î–≤–∏–∂–µ–Ω–∏–µ –≤ –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–µ</label>
          <textarea id="–¥–≤–∏–∂–µ–Ω–∏–µ –≤ –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–µ"></textarea>
        </div>
        <div class="field">
          <label>–°–∏–º–ø—Ç–æ–º—ã –Ω–∞—Ç—è–∂–µ–Ω–∏—è –õ–∞—Å–µ–≥–∞</label>
          <textarea id="—Å–∏–º–ø—Ç–æ–º—ã –Ω–∞—Ç—è–∂–µ–Ω–∏—è –ª–∞—Å–µ–≥–∞"></textarea>
        </div>
        <div class="field">
          <label>–ü–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞–∫–∏</label>
          <textarea id="–ø–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞–∫–∏"></textarea>
        </div>
        <div class="field">
          <label>–ü–æ—Ö–æ–¥–∫–∞</label>
          <textarea id="–ø–æ—Ö–æ–¥–∫–∞"></textarea>
        </div>
        <div class="field">
          <label>–ü–∞–ª—å—Ü–µ–Ω–æ—Å–æ–≤–∞—è –ø—Ä–æ–±–∞</label>
          <textarea id="–ø–∞–ª—å—Ü–µ–Ω–æ—Å–æ–≤–∞—è –ø—Ä–æ–±–∞"></textarea>
        </div>
        <div class="field">
          <label>–ü—è—Ç–æ—á–Ω–æ-–∫–æ–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–±–∞</label>
          <textarea id="–ø—è—Ç–æ—á–Ω–æ-–∫–æ–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–±–∞"></textarea>
        </div>
        <div class="field">
          <label>–ì–∏–ø–µ—Ä–∫–∏–Ω–µ–∑—ã</label>
          <textarea id="–≥–∏–ø–µ—Ä–∫–∏–Ω–µ–∑—ã"></textarea>
        </div>
        <div class="field">
          <label>–í–µ–≥–µ—Ç–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</label>
          <textarea id="–≤–µ–≥–µ—Ç–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏"></textarea>
        </div>
        <div class="field">
          <label>–õ–µ—á–µ–Ω–∏–µ</label>
          <textarea id="–ª–µ—á–µ–Ω–∏–µ"></textarea>
        </div>
        <div class="field">
          <label>–Ø–≤–∫–∞</label>
          <textarea id="—è–≤–∫–∞"></textarea>
        </div>
        <div class="field">
          <label>–í–∏–¥ –æ–±—Ä–∞—â–µ–Ω–∏—è</label>
          <textarea id="–≤–∏–¥ –æ–±—Ä–∞—â–µ–Ω–∏—è"></textarea>
        </div>
      </div>

      <div class="column">
        <div class="field">
          <label>–ê–Ω–∞–º–Ω–µ–∑ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è</label>
          <textarea id="–∞–Ω–∞–º–Ω–µ–∑ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è"></textarea>
        </div>
        <div class="field">
          <label>–°–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å</label>
          <textarea id="—Å–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å"></textarea>
        </div>
        <div class="field">
          <label>–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å—Ñ–µ—Ä–∞</label>
          <textarea id="—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å—Ñ–µ—Ä–∞"></textarea>
        </div>
        <div class="field">
          <label>–ü—Ä–∞–∫—Å–∏—Å</label>
          <textarea id="–ø—Ä–∞–∫—Å–∏—Å"></textarea>
        </div>
        <div class="field">
          <label>–û–±–æ–Ω—è–Ω–∏–µ</label>
          <textarea id="–æ–±–æ–Ω—è–Ω–∏–µ"></textarea>
        </div>
        <div class="field">
          <label>–ü—Ç–æ–∑</label>
          <textarea id="–ø—Ç–æ–∑"></textarea>
        </div>
        <div class="field">
          <label>–ê–Ω–∏–∑–æ–∫–æ—Ä–∏—è</label>
          <textarea id="–∞–Ω–∏–∑–æ–∫–æ—Ä–∏—è"></textarea>
        </div>
        <div class="field">
          <label>–†–µ–∞–∫—Ü–∏—è –Ω–∞ —Å–≤–µ—Ç</label>
          <textarea id="—Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Å–≤–µ—Ç"></textarea>
        </div>
        <div class="field">
          <label>5 7 8 9 10 11 12 –ø–∞—Ä—ã –ß–ú–ù</label>
          <textarea id="–ø–∞—Ä—ã —á–º–Ω"></textarea>
        </div>
        <div class="field">
          <label>–ú—ã—à–µ—á–Ω–∞—è —Å–∏–ª–∞ –≤ –≤–µ—Ä—Ö–Ω–∏—Ö –∫–æ–Ω–µ—á–Ω–æ—Å—Ç—è—Ö</label>
          <textarea id="–º—ã—à–µ—á–Ω–∞—è —Å–∏–ª–∞ –≤ –≤–µ—Ä—Ö–Ω–∏—Ö –∫–æ–Ω–µ—á–Ω–æ—Å—Ç—è—Ö"></textarea>
        </div>
        <div class="field">
          <label>–†–µ—Ñ–ª–µ–∫—Å—ã</label>
          <textarea id="—Ä–µ—Ñ–ª–µ–∫—Å—ã"></textarea>
        </div>
        <div class="field">
          <label>–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –º—ã—à—Ü —Å–ø–∏–Ω—ã</label>
          <textarea id="–Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –º—ã—à—Ü —Å–ø–∏–Ω—ã"></textarea>
        </div>
        <div class="field">
          <label>–ü–∞–ª—å–ø–∞—Ü–∏—è –∏ –ø–µ—Ä–∫—É—Å—Å–∏—è –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–∞</label>
          <textarea id="–ø–∞–ª—å–ø–∞—Ü–∏—è –∏ –ø–µ—Ä–∫—É—Å—Å–∏—è –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–∞"></textarea>
        </div>
        <div class="field">
          <label>–°–∏–º–ø—Ç–æ–º—ã –Ω–∞—Ç—è–∂–µ–Ω–∏—è –ù–µ—Ä–∏</label>
          <textarea id="—Å–∏–º–ø—Ç–æ–º—ã –Ω–∞—Ç—è–∂–µ–Ω–∏—è –Ω–µ—Ä–∏"></textarea>
        </div>
        <div class="field">
          <label>–°–∏–º–ø—Ç–æ–º—ã –Ω–∞—Ç—è–∂–µ–Ω–∏—è –í–∞—Å—Å–µ—Ä–º–∞–Ω–∞</label>
          <textarea id="—Å–∏–º–ø—Ç–æ–º—ã –Ω–∞—Ç—è–∂–µ–Ω–∏—è –≤–∞—Å—Å–µ—Ä–º–∞–Ω–∞"></textarea>
        </div>
        <div class="field">
          <label>–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</label>
          <textarea id="—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"></textarea>
        </div>
        <div class="field">
          <label>–í –ø–æ–∑–µ –†–æ–º–±–µ—Ä–≥–∞</label>
          <textarea id="–≤ –ø–æ–∑–µ –†–æ–º–±–µ—Ä–≥–∞"></textarea>
        </div>
        <div class="field">
          <label>–ü—Ä–æ–±–∞ –Ω–∞ –∞–¥–∏–∞–¥–æ—Ö–æ–∫–∏–Ω–µ–∑</label>
          <textarea id="–ø—Ä–æ–±–∞ –Ω–∞ –∞–¥–∏–∞–¥–æ—Ö–æ–∫–∏–Ω–µ–∑"></textarea>
        </div>
        <div class="field">
          <label>–≠–∫—Å—Ç—Ä–∞–ø–∏—Ä–∞–º–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</label>
          <textarea id="—ç–∫—Å—Ç—Ä–∞–ø–∏—Ä–∞–º–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞"></textarea>
        </div>
        <div class="field">
          <label>–ú–µ–Ω–∏–Ω–≥–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞–∫–∏</label>
          <textarea id="–º–µ–Ω–∏–Ω–≥–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞–∫–∏"></textarea>
        </div>
        <div class="field">
          <label>–î–µ—Ä–º–æ–≥—Ä–∞—Ñ–∏–∑–º</label>
          <textarea id="–¥–µ—Ä–º–æ–≥—Ä–∞—Ñ–∏–∑–º"></textarea>
        </div>
        <div class="field">
          <label>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</label>
          <textarea id="—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"></textarea>
        </div>
        <div class="field">
          <label>–°—Ç–µ–ø–µ–Ω—å —Ç—è–∂–µ—Å—Ç–∏</label>
          <textarea id="—Å—Ç–µ–ø–µ–Ω—å —Ç—è–∂–µ—Å—Ç–∏"></textarea>
        </div>
        <div class="field">
          <label>–ù–æ–∑–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –¥–∏–∞–≥–Ω–æ–∑–∞</label>
          <textarea id="–Ω–æ–∑–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –¥–∏–∞–≥–Ω–æ–∑–∞"></textarea>
        </div>
      </div>
    </div>

    <div class="diagnosis-container">
        <div class="field">
          <label for="diagnosis">–î–∏–∞–≥–Ω–æ–∑</label>
          <textarea class="diagnosis" id="–¥–∏–∞–≥–Ω–æ–∑" name="diagnosis"></textarea>
        </div>
      </div>
      

   <!-- //<div class="buttons">
      <button onclick="alert('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ')">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button onclick="window.print()">üìÑ –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF</button>
      <button onclick="alert('–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –ø–æ–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç')">üéôÔ∏è –ù–ê–ß–ê–¢–¨ –ì–û–õ–û–°–û–í–û–ô –í–í–û–î</button>
    </div>
  </div> -->

  <!-- <script src="script.js"></script> -->
</body>
</html>
